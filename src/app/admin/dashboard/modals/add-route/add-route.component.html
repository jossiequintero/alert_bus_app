<ion-header>
  <ion-toolbar>
    <ion-title>{{ title }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <form [formGroup]="routeForm">

    <ion-item>
      <ion-label position="stacked">Nombre:</ion-label>
      <ion-input formControlName="name" placeholder="Ej. Ruta Centro - Mall del Sol"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Descripci贸n:</ion-label>
      <ion-input formControlName="descripcion" placeholder="Ej. Conecta el centro ..."></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="stacked">Tiempo Recorrido (minutos):</ion-label>
      <ion-input type="number" formControlName="tiempoRecorrido"></ion-input>
    </ion-item>
    
  </form>
    <h3>Paradas</h3>
    <ion-card>
      <ion-card-header>
        <ion-item>
          <ion-label position="stacked">Nombre</ion-label>
          <ion-input placeholder="Ej. Parque Centenario" [(ngModel)]="stop.nombre" [ngModelOptions]="{ standalone: true }"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Descripci贸n</ion-label>
          <ion-input placeholder="Ej. Parada principal" [(ngModel)]="stop.descripcion" [ngModelOptions]="{ standalone: true }"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Latitud</ion-label>
          <ion-input type="number" [(ngModel)]="stop.latitud" [ngModelOptions]="{ standalone: true }"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Longitud</ion-label>
          <ion-input type="number" [(ngModel)]="stop.longitud" [ngModelOptions]="{ standalone: true }"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Orden</ion-label>
          <ion-input type="number" [(ngModel)]="stop.order" [ngModelOptions]="{ standalone: true }"></ion-input>
        </ion-item>
        <ion-button expand="block" (click)="addStop()">
          Agregar parada
        </ion-button>
      </ion-card-header>
    </ion-card>

    <ion-list *ngIf="stops.length; else emptyStops">
      <ion-item *ngFor="let stopitem of stops; let i = index">
        <ion-label>
          <h3>{{ stopitem.order }}. {{ stopitem.nombre }}</h3>
          <p>{{ stopitem.descripcion || 'Sin descripci贸n' }}</p>
          <p>Lat: {{ stopitem.latitud }} 路 Lng: {{ stopitem.longitud }}</p>
        </ion-label>
        <ion-button fill="clear" color="danger" (click)="removeStop(i)">
          <ion-icon name="trash"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>
    <ng-template #emptyStops>
      <ion-text color="medium">No se han agregado paradas.</ion-text>
    </ng-template>

    <ion-button expand="block" (click)="save()" [disabled]="routeForm.invalid || !stops.length || isSaving">
      <ion-spinner slot="start" *ngIf="isSaving"></ion-spinner>
      {{ primaryButtonLabel }}
    </ion-button>


</ion-content>

